{"ast":null,"code":"var _jsxFileName = \"/home/dell/Documents/Market/src/components/components/ColumnNewRedux.js\",\n  _s = $RefreshSig$();\nimport React, { memo, useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport * as selectors from '../../store/selectors';\nimport * as actions from '../../store/actions/thunks';\nimport { clearNfts, clearFilter } from '../../store/actions';\nimport NftCard from './NftCard';\nimport NftMusicCard from './NftMusicCard';\nimport { shuffleArray } from '../../store/utils';\n\n//react functional component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ColumnNewRedux = _ref => {\n  _s();\n  let {\n    showLoadMore = true,\n    shuffle = false,\n    authorId = null\n  } = _ref;\n  const dispatch = useDispatch();\n  const nftItems = useSelector(selectors.nftItems);\n  const nfts = nftItems ? shuffle ? shuffleArray(nftItems) : nftItems : [];\n  const [height, setHeight] = useState(0);\n  const onImgLoad = _ref2 => {\n    let {\n      target: img\n    } = _ref2;\n    let currentHeight = height;\n    if (currentHeight < img.offsetHeight) {\n      setHeight(img.offsetHeight);\n    }\n  };\n  useEffect(() => {\n    dispatch(actions.fetchNftsBreakdown(authorId));\n  }, [dispatch, authorId]);\n\n  //will run when component unmounted\n  useEffect(() => {\n    return () => {\n      dispatch(clearFilter());\n      dispatch(clearNfts());\n    };\n  }, [dispatch]);\n  const loadMore = () => {\n    dispatch(actions.fetchNftsBreakdown(authorId));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: [\"ds\", nfts && nfts.map((nft, index) => nft.category === 'music' ? /*#__PURE__*/_jsxDEV(NftMusicCard, {\n      nft: nft,\n      audioUrl: nft.audio_url,\n      onImgLoad: onImgLoad,\n      height: height\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(NftCard, {\n      nft: nft,\n      onImgLoad: onImgLoad,\n      height: height\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 17\n    }, this)), showLoadMore && nfts.length <= 20 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-lg-12\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spacer-single\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        onClick: loadMore,\n        className: \"btn-main lead m-auto\",\n        children: \"Load More\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this);\n};\n_s(ColumnNewRedux, \"NL/NF/+kNKso3HKw64Vj35B4aYI=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = ColumnNewRedux;\nexport default _c2 = /*#__PURE__*/memo(ColumnNewRedux);\nvar _c, _c2;\n$RefreshReg$(_c, \"ColumnNewRedux\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","memo","useEffect","useState","useSelector","useDispatch","selectors","actions","clearNfts","clearFilter","NftCard","NftMusicCard","shuffleArray","ColumnNewRedux","showLoadMore","shuffle","authorId","dispatch","nftItems","nfts","height","setHeight","onImgLoad","target","img","currentHeight","offsetHeight","fetchNftsBreakdown","loadMore","map","nft","index","category","audio_url","length"],"sources":["/home/dell/Documents/Market/src/components/components/ColumnNewRedux.js"],"sourcesContent":["import React, { memo, useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport * as selectors from '../../store/selectors';\nimport * as actions from '../../store/actions/thunks';\nimport { clearNfts, clearFilter } from '../../store/actions';\nimport NftCard from './NftCard';\nimport NftMusicCard from './NftMusicCard';\nimport { shuffleArray } from '../../store/utils';\n\n//react functional component\nconst ColumnNewRedux = ({ showLoadMore = true, shuffle = false, authorId = null }) => {\n\n    const dispatch = useDispatch();\n    const nftItems = useSelector(selectors.nftItems);\n    const nfts = nftItems ? shuffle ? shuffleArray(nftItems) : nftItems : [];\n    const [height, setHeight] = useState(0);\n\n    const onImgLoad = ({target:img}) => {\n        let currentHeight = height;\n        if(currentHeight < img.offsetHeight) {\n            setHeight(img.offsetHeight);\n        }\n    }\n    \n    useEffect(() => {\n        dispatch(actions.fetchNftsBreakdown(authorId));\n    }, [dispatch, authorId]);\n\n    //will run when component unmounted\n    useEffect(() => {\n        return () => {\n            dispatch(clearFilter());\n            dispatch(clearNfts());\n        }\n    },[dispatch]);\n\n    const loadMore = () => {\n        dispatch(actions.fetchNftsBreakdown(authorId));\n    }\n\n    return (\n        <div className='row'>ds\n            {nfts && nfts.map( (nft, index) => (\n                nft.category === 'music' ?\n                <NftMusicCard nft={nft} audioUrl={nft.audio_url} key={index} onImgLoad={onImgLoad} height={height} />\n                :\n                <NftCard nft={nft} key={index} onImgLoad={onImgLoad} height={height} />\n            ))}\n            { showLoadMore && nfts.length <= 20 &&\n                <div className='col-lg-12'>\n                    <div className=\"spacer-single\"></div>\n                    <span onClick={loadMore} className=\"btn-main lead m-auto\">Load More</span>\n                </div>\n            }\n        </div>              \n    );\n};\n\nexport default memo(ColumnNewRedux);"],"mappings":"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"},"metadata":{},"sourceType":"module"}